/* ==================================
             EVOLUTION SCREEN
   ================================== */
#evolution-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #202020;
    /* Dark Lab Background like Selection */
    z-index: 9999;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    pointer-events: auto;
    font-family: inherit;
}

/* Central Preview Box (Like Selection Screen) */
.evo-preview-box {
    width: 280px;
    height: 280px;
    background: #fff;
    border: 4px solid #444;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    margin-bottom: 20px;
}

/* Container for sprite within the box */
.evo-sprite-container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

#evo-sprite {
    image-rendering: pixelated;
    width: 160px;
    /* Big Sprite */
    height: 160px;
    transition: filter 0.2s, transform 0.2s;
    transform-origin: center center;
}

/* Text Box (Like Selection/Lab Text) */
.evo-text-box {
    width: 280px;
    height: 60px;
    background: white;
    border: 4px solid #888;
    /* Match Selection Border */
    padding: 8px;
    font-size: 10px;
    /* Retro Size */
    font-weight: bold;
    text-transform: uppercase;
    line-height: 1.4;
    color: black;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    /* Left align text */
}

/* Unused but kept to avoid breakage if JS toggles it */
.evo-bg {
    display: none;
}

/* === ANIMATIONS === */

/* 1. White Silhouette (Preparation) */
.evo-white {
    filter: brightness(0) invert(1) drop-shadow(0 0 4px white);
}

/* 2. Rapid Flash (The Gen 3 flicker effect) */
@keyframes evo-flash-cycle {
    0% {
        filter: brightness(1);
        transform: scale(1);
    }

    25% {
        filter: brightness(10);
        transform: scale(1.1);
    }

    50% {
        filter: brightness(0) invert(1);
        transform: scale(0.9);
    }

    75% {
        filter: brightness(10);
        transform: scale(1.1);
    }

    100% {
        filter: brightness(1);
        transform: scale(1);
    }
}

.anim-evo-cycle {
    animation: evo-flash-cycle 0.5s linear infinite;
}

/* 3. Deep Pulse (Before transformation) */
@keyframes evo-pulse {
    0% {
        filter: brightness(1) sepia(1) hue-rotate(180deg) saturate(3);
        transform: scale(1);
    }

    50% {
        filter: brightness(2) sepia(0) saturate(0);
        transform: scale(1.05);
    }

    100% {
        filter: brightness(1) sepia(1) hue-rotate(180deg) saturate(3);
        transform: scale(1);
    }
}

.anim-evo-jam {
    animation: evo-pulse 1s ease-in-out infinite;
}

/* 4. Complete Reveal Flash */
@keyframes reveal-flash {
    0% {
        filter: brightness(10);
        transform: scale(1.2);
        opacity: 1;
    }

    100% {
        filter: brightness(1);
        transform: scale(1);
        opacity: 1;
    }
}

.anim-reveal {
    animation: reveal-flash 1.0s ease-out forwards;
}